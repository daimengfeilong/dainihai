
<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=1.0"/>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta content="telephone=no" name="format-detection"/>
    <title>注册</title>
    <script type="text/javascript" src="//cdn.bootcss.com/jquery/1.9.1/jquery.min.js"></script>
    <script type="text/javascript">
        //        (function (i, s, o, g, r, a, m) {
        //            i['GoogleAnalyticsObject'] = r;
        //            i[r] = i[r] || function () {
        //                (i[r].q = i[r].q || []).push(arguments)
        //            }, i[r].l = 1 * new Date();
        //            a = s.createElement(o),
        //                    m = s.getElementsByTagName(o)[0];
        //            a.async = 1;
        //            a.src = g;
        //            m.parentNode.insertBefore(a, m)
        //        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
        //
        //        ga('create', 'UA-85673707-1', 'iwshyou.blogspot.com');
        //        ga('send', 'pageview');

        (function (doc, win) {
            var docEl = doc.documentElement,
                    resizeEvt = 'orientationchange' in window ? 'orientationchange' : 'resize',
                    recalc = function () {
                        var clientWidth = docEl.clientWidth;
                        if (!clientWidth) return;
                        docEl.style.fontSize = 100 * (clientWidth / 750) + 'px';
                    };
            recalc();if (!doc.addEventListener) return;
            win.addEventListener(resizeEvt, recalc, false);
            doc.addEventListener('DOMContentLoaded', recalc, false);
        })(document, window);
    </script>
    <link rel="stylesheet" href="css/base.css"/>
    <link rel="stylesheet" href="css/loadding.css" class="cp-pen-styles"/>
    <link rel="stylesheet" href="css/tooltip.css"/>
    <style type="text/css">
        *{
            box-sizing: border-box;
        }
        body{
            font-size: 0.3rem;
        }
        .write_submit_checked,.hq_vcode{
            background-color: #ff943a;
            color: #333;
            border: none;
        }
        #cnzz_stat_icon_1260729375{
            display: none;
        }
        .validate{
            position: fixed;
            top: 0;
            left: 0;
            z-index: 5;
            width: 100%;
            height: 100%;
            background-color: rgba(51,51,51,0.5);
            display: none;
        }
        .validate-cnt{
            position: absolute;
            top: 50%;
            left: 50%;
            width: 80%;
            margin-left: -40%;
            margin-top: -2.54rem;
            padding: 0 0.5rem;
            /*background-color: white;*/
            border-radius: 0.3rem;
            background: url("./images/guangdiantong/alert-bg.png") repeat center;
            background-size: 100% 100%;
            text-align: center;
        }
        .validate-cnt h5{
            padding: 0.35rem 0 0.3rem 0;
            font-size: 0.36rem;
            color: #333;
            font-weight: normal;
        }
        .validate-input{

        }
        .validate-input p{
            padding: 0.35rem 0 0.2rem 0;
            font-size: 0.29rem;
            color: #333;
        }
        .validate-input input{
            border: 1px solid #c6c6c6;
            border-radius: 0.5rem;
            font-size: 0.3rem;
            width: 100%;
            height: 0.72rem;
            padding-left: 1.5rem;
        }
        .validate-input img{
            width: 1.75rem;
            height: 0.5rem;
            border: 1px solid #eee;
            margin-right: 0.5rem;
        }
        .changeCode{
            font-size: 0.3rem;
            color: #ff943a;
            text-decoration: underline;
        }
        .validate-btn{
            width: 100%;
            margin: 0.22rem 0;
        }
        .validate-btn div{
            display: inline-block;
            width: 2.08rem;
            height: 0.74rem;
            text-align: center;
            line-height: 0.74rem;
            border-radius: 0.37rem;
            font-size: 0.36rem;
        }
        .validate-btn-cancel{
            border: 1px solid #e5e5e5;
            background-color: #e5e5e5;
            color: #333;
            margin-right: 0.6rem;
        }
        .validate-btn-sure{
            border: 1px solid #ffd946;
            background-color: #ffd946;
            color: #333;
        }
        /*注册样式*/
        .register-cnt{
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            background: url("images/login_bg.png") no-repeat center;
        }
        .lg_reigster{
            position: absolute;
            left: 0;
            top: 45%;
        }
        .lg_login_dl{
            background: none;
        }
        .lg_login_dl li{
            width: 85%;
            padding: 0 0.15rem;
            height: 0.9rem;
            margin: 0.15rem auto 0 auto;
            font-size: 0.35rem;
            border: 1px dashed #112542;
            border-radius: 2rem;
            background-color: #fff;
            overflow: hidden;
        }
        .br_top{
            border-top: none;
        }
        .br_bottom{
            border-bottom: none;
        }
        .lg_login_dl li u{
            font-size: 0.35rem;
            color: #112542;
            margin-left: 0.1rem;
            margin-top: 0.18rem;
        }
        .lg_login_dl li input{
            width: 59%;
            height: 100%;
            line-height: 0.4rem;
            font-size: 0.35rem;
            margin-left: 0.1rem;
        }
        .lg_login_left,.lg_login_left a,.lg_login_left i,.lg_login_right,.lg_login_right a{
            color: #333;
        }
        .lg_login_right a{
            text-decoration: underline;
        }
        .lg_login_left i{
            margin-top: 0;
            width: 0.31rem;
            height: 0.31rem;
        }
        .lg_login_right{
            font-size: 0.28rem;
        }
        .mm_eye_unable,.mm_eye_checked{
            margin-right: 0.2rem;
            height: 100%;
        }
        .hq_vcode,.hq_vcode_gray{
            /*width: 1.1rem;*/
            height: 100%;
            border: none;
            background-color: #ff943a;
            border-radius: 0;
            color: #333;
            margin: 0;
            text-align: center;
            line-height: 0.8rem;
            font-size: 0.26rem;
            font-weight: normal;
        }
        #btn_loginfrom{
            margin-top: 0.2rem;
        }
        .lg_login_footer_btn{
            width: 85%;
        }
        .lg_login_label{
            overflow: hidden;
            margin-top: 0.2rem;
        }

    </style>
</head>

<body style="background-color: #FFFFFF;">
<!--top message-->
<div class="plaint_middle_dlage hide_mian_div" id="topmeassage">
</div>
<!--top message-->
<section class="register-cnt">
    <section class="lg_reigster">
        <ul class="lg_login_dl">
            <li class="br_top" style="margin-top: 0.1rem;">
                <u>手机号</u>
                <input type="tel" maxlength="11" placeholder="请输入您的手机号码" id="txt_phoneno" onblur="changephone()"/>

            </li>
            <li class="br_top" style="position: relative;">
                <u>验证码</u>
                <input type="tel" placeholder="请输入短信验证码" id="txt_vcode" onblur="changevcode()"/>
                <i class="hq_vcode" id="hq_vcode">验证码</i>
            </li>
            <li class="br_top br_bottom">
                <u>密&nbsp;&nbsp; 码</u>
                <input type="password" placeholder="6-20个字母或数字组成" id="txt_phonepwd" maxlength="20" onblur="changepwd()"/>
                <i class="mm_eye_unable" onclick="change_eye(this,'txt_phonepwd')"></i></li>
        </ul>
        <!--<ul class="gray_bg"></ul>-->
        <ul class="lg_login_dl">
            <li class="br_top">
                <u>邀请码</u>
                <input type="text" placeholder="请输入邀请码(选填)" id="txt_invcode"/>
            </li>
        </ul>
        <div class="lg_login_footer_btn">
            <div class="lg_login_label">
                <label class="lg_login_left"><i class="gou_checked" onclick="change_radio_status(this,'btn_loginfrom')"></i>我已经阅读并同意<a
                        href="talk/register_pro.html">《注册服务协议》</a></label>
            </div>
            <button class="write_submit_checked" id="btn_loginfrom">确认注册</button>
            <div class="lg_login_label" style="margin-top: 0.1rem;">
                <label class="lg_login_right">已有账号，<a href="login.html">立即登录</a></label>
            </div>
        </div>
    </section>
</section>

<!--图形验证码开始-->
<div class="validate">
    <div class="validate-cnt">
        <h5>请输入图片验证码</h5>
        <div class="validate-input">
            <div>
                <input type="text" name="input-validate" placeholder="请输入验证码">
            </div>
            <p>输入下图中的字符,不区分大小写</p>
            <div>
                <img src="" alt="暂无图片" style="vertical-align: middle">
                <span style="vertical-align: middle;" class="changeCode">看不清,换一张</span>
            </div>
        </div>
        <div class="validate-btn">
            <div class="validate-btn-cancel"><span>取消</span></div>
            <div class="validate-btn-sure"><span>确定</span></div>
        </div>
    </div>
</div>
<!--图形验证码结束-->
<script type="text/javascript " src="js/jquery.json-2.4.min.js"></script>
<script type="text/javascript " src="js/History.js"></script>
<script type="text/javascript" src="js/config.js"></script>
<script type="text/javascript" src="js/tkPublic.js"></script>
<script type="text/javascript" src="js/pub.js"></script>
<script type="text/javascript" src="js/turnjson.js"></script>
<script type="text/javascript" src="js/baseinfo.js"></script>
<script>
//    var clearShareSetTime;
    $(document).ready(function () {
        var windH = $(document).height();
        $(".register-cnt").css({
            height: windH + "px",
            backgroundSize: "100%" + " " + windH + "px"
        });
        loadLogin_first();
        var vcode = GetUrlParameter("vcode");
        if (vcode != '' && vcode != null && vcode != 'undefined') {
            $("#txt_invcode").val(vcode);
        }
        var yzjscore = GetUrlParameter("yzscore");
        if (yzjscore != '' && yzjscore != 'undefined' && yzjscore != null) {
            if (parseInt(yzjscore) > 0) {
                localStorage.yzcdscore = yzjscore;
            }
        }
        LoadingOver();
    });
    $("#btn_loginfrom").click(function () {
        if ($(this).attr("class").indexOf("_checked") > -1) {
            registerclick();
        }
    });
    $("#hq_vcode").click(function () {
    //        btnvcode(1);
        shareCode(1);
    });
    $(".validate-btn-sure").click(function () {
        inputImgCode(1);
    });
    $(".validate-btn-cancel").click(function () {
        $(".validate").fadeOut();
    });
    $('.changeCode').click(function () {
        $(".validate input").val('');
        $(".validate .validate-input img").attr('src', urlLink + '/web/validation/getCode?' + Math.random());
    });
</script>
<script type="text/javascript">
    function register(){
        if (localStorage.int32_is_register == 1) {
            window.location.href = "accountactivate.html";
        } else {
            localStorage.sharefriend = 0;
            window.location.href = "rg_index_ds.html";
        }
    }
    //验证图形码
    function inputImgCode (type) {
        var inputVal = $('.validate-input input').val();
        $.ajax({
            url: urlLink + '/web/validation/verifyCode',
            type: 'post',
            data: {
                iCode: inputVal
            },
            xhrFields:{
                withCredentials:true
            },
            success: function (data){
                console.log(data);
                if (data.code == 0) {
                    setTimeout(function () {
                        $(".validate").fadeOut();
                    }, 1000);
                    var sourceType = GetUrlParameter("type");
                    var phone = $("#txt_phoneno").val();
                    getVerifyCod(phone, type, inputVal);
                } else {
                    $(".validate input").val('');
                    $(".validate .validate-input img").attr('src', urlLink + '/web/validation/getCode?' + Math.random());
                    ShowMsg('验证码输入错误');
                }
            },
            err: function (err) {
                console.log(err);
            }
        })
    }
    //<!--分享页面发送验证码S-->
    function shareCode(type) {
        var phone = $("#txt_phoneno").val();
        if (phone == "" || phone == null || phone == "undefined") {
            ShowMsg("请输入您的手机号码");
            return false;
        } else if (!regPhone.exec(phone)) {
            ShowMsg("请输入正确的手机号码");
            return false;
        } else {
            $.ajax({
                url: urlLink + '/web/validation/need_code',
                type: 'get',
                xhrFields:{
                    withCredentials:true
                },
                success: function (data) {
                    console.log(data);
                    if (data.code == 0) {
                        $(".validate").fadeIn();
                        $(".validate input").val('');
                        $(".validate .validate-input img").attr('src', urlLink + '/web/validation/getCode?' + Math.random());
                    } else {
                        var sourceType = GetUrlParameter("type");
                        getVerifyCod(phone, type, '');
                    }
                },
                err: function (err) {
                    console.log('请求失败')
                }
            });
        }
    }

    function getVerifyCod(phone, type, codeVal) {
//        clearTimeout(clearShareSetTime);
        Loading();
        $.ajaxSetup({
            xhrFields:{
                withCredentials:true
            }
        });
        $.post(urlLink + "/web/validation/send_msg", {
            phone_number: phone,
            msg_type: type,
            type: 'html5',
            iCode: codeVal
        }, function (result) {
            var datat = $.toJSON(result);
            var obj = jQuery.parseJSON(datat);
            switch (obj.code) {
                case 0: //OK
                    ShowMsg("验证码发送成功，请注意查看手机！");
                    time('hq_vcode');
                    break;
                case -10001:
                    ShowMsg("手机号已注册，请直接登录");
                    break;
                default:
                    ShowMsg(obj.msg);
                    break;
            }
            LoadingOver();
        })
    }

</script>

</body>

</html>