function preventDefault(t){t.preventDefault()}function ProdDetails(t){Loading();var e=setTimeout(function(){LoadingOver(),top_meassage("请求超时，请稍后再试"),show_topmessage()},3e4),a=createXmlHttpRequest();if(null!=a){var i=PordLink+"/item/get_commodity_detail?commodity_id="+t;a.open("GET",i,!0),a.withCredentials=!1,a.onreadystatechange=function(){if(4==a.readyState&&200==a.status){e&&(clearTimeout(e),e=null),severResponse=a.responseText;var i=JSON.parse(severResponse);switch(i.code){case 0:$("#hid_itemid").val(t);var r="",s="",o=0;$("#product_name").html(i.commodity_detail.commodity_name);var n=i.commodity_detail.category;for(var d in n){r+='<div class="prodd_sku_ul">';for(var l in n[d]){r+='<div class="prodd_skuli_left">',r+="<div>"+l+"</div>",r+="</div>",r+='<div class="prodd_skuli_right">',r+='<ul class="prodd_skuli_right_ul">',o=0;for(var c in n[d][l])for(var _ in n[d][l][c])"id"==_&&(r+=0==o?"<li alt="+n[d][l][c][_]+' class="active">':"<li alt="+n[d][l][c][_]+" >"),"short_message"==_&&(r+=n[d][l][c][_],r+="</li>"),o++;r+="</ul>",r+="</div>"}r+="</div>",r+='<div class="clear"></div>'}$(".prodd_sku").html(r),$.each(i.commodity_detail.strategy,function(t,e){0==t&&($("#prod_strategyval").html(unescape(e.short_message)),$("#hid_strategyid").val(e.strategy_id)),s+='<li alt="'+e.strategy_id+'">'+unescape(e.short_message)+"</li>"}),$("#prod_strategy").html(s);var m=i.commodity_detail.item_detail,u=0,v=0,p="",f="";for(var h in m)for(var g in m[h]){0==u&&(p=h+""+g),item_array+="{skuname:"+h+g,item_array+=",data:{";for(var y in m[h][g])item_array+=y+":'"+m[h][g][y]+"',",0==v&&"price"==y&&(f=m[h][g][y]+""+$("#hid_strategyid").val());item_array=item_array.substring(0,item_array.length-1),item_array+="}}|&tkfw&|",u++}BtnSku(p),$("#hid_itemskuid").val(p);var b=i.commodity_detail.installment;for(var k in b)for(var w in b[k])straprice_array+="{strapname:"+k+w,straprice_array+=",",straprice_array+="val:'"+(b[k][w]/100).toFixed(2)+"',",straprice_array=straprice_array.substring(0,straprice_array.length-1),straprice_array+="}|&tkfw&|",v++;BtnStraPrice(f),$("#hid_strapricekid").val(f),LoadingOver();break;default:top_meassage(i.msg),show_topmessage()}LoadingOver()}},a.send(null)}YC_LoadData()}function YC_LoadData(){setTimeout(function(){$(".prodd_sku").find(".prodd_sku_ul").find("ul").find("li").bind(touchstart,function(){$(this).parents("ul").find("li").removeClass("active"),$(this).addClass("active"),GetSelectSku()}),$(".prod_seclect").bind(touchstart,function(){$(this).parents("ul").find("li").removeClass("active"),$(this).addClass("active")}),$(".prod_divsigle").bind(touchstart,function(){$("#prod_selectfenqibg").show(),$("#prod_selectfenqi").show(),$("body").css({"overflow-x":"hidden","overflow-y":"hidden"}),document.addEventListener("touchmove",preventDefault,!1)}),$("#prod_selectfenqibg").bind(touchstart,function(){$("#prod_selectfenqibg").hide(),$("#prod_selectfenqi").hide(),$("body").css({"overflow-x":"hidden","overflow-y":"auto"}),document.removeEventListener("touchmove",preventDefault,!1)}),$("#prod_strategy").find("li").bind(touchstart,function(){divhide("prod_selectfenqibg"),divhide("prod_selectfenqi");var t=$(this).attr("alt"),e=$(this).html();$("#hid_strategyid").val(t),$("#prod_strategyval").html(e)})},500)}function GetSelectSku(){for(var t="",e=$(".prodd_sku"),a=e.find(".prodd_sku_ul").length,i=0;i<a;i++)for(var r=e.find(".prodd_sku_ul").eq(i).find("ul").find("li"),s=r.length,o=0;o<s;o++)"active"==r.eq(o).attr("class")&&(t+=r.eq(o).attr("alt")+"");""!=t&&BtnSku(t)}function BtnSku(val){for(var itemarr=item_array.split("|&tkfw&|"),i=0;i<itemarr.length-1;i++){var itema_json=itemarr[i],obj=eval("("+itema_json+")");obj.skuname==val&&($("#hid_price").val((obj.data.price/100).toFixed(2)),$("#lbl_xj").html((obj.data.price/100).toFixed(2)),$("#lbl_yj").html((obj.data.origin_price/100).toFixed(2)),$("#banner_box").html(PorductImg(obj.data.pic_big)),YCJdPic(),BtnStraPrice(obj.data.price+""+$("#hid_strategyid").val()))}}function BtnStraPrice(strapriceval){for(var itemarrsp=straprice_array.split("|&tkfw&|"),i=0;i<itemarrsp.length-1;i++){var itemasp_json=itemarrsp[i],obj=eval("("+itemasp_json+")");obj.strapname==strapriceval&&($("#yuegongprice").html(obj.val),$("#hid_yuegongprice").val(obj.val))}}function PorductImg(t){var e='<ul id="imglist" style="list-style: none; width: 100%; transition: 500ms; transform: translate3d(0px, 0px, 0px);">';return e+='<li style="width: 100%; display: table-cell; vertical-align: top;" ><img src = "'+t+'" style = "min-height: 50px;"></li> ',e+="</ul>"}function YCJdPic(){setTimeout(function(){$("#banner_box").show()},500)}function Prod_Stock(t){var e=setTimeout(function(){LoadingOver(),top_meassage("请求超时，请稍后再试"),show_topmessage()},3e4),a=createXmlHttpRequest();if(null!=a){var i=PordLink+"/item/get_item_inventory?item_id="+t;a.open("GET",i,!0),a.withCredentials=!1,a.onreadystatechange=function(){if(4==a.readyState&&200==a.status){e&&(clearTimeout(e),e=null),severResponse=a.responseText;var t=JSON.parse(severResponse);switch(t.code){case 0:$("#lbl_prodstock").html(t.inventory);break;default:top_meassage(t.msg),show_topmessage()}LoadingOver()}},a.send(null)}}var item_array="",straprice_array="";