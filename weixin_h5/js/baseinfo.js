function loginclick(){var e=$("#txt_phoneno").val(),t=$("#txt_phonepwd").val();return""==e||null==e||"undefined"==e?(ShowMsg("请输入您的手机号码！"),!1):regPhone.exec(e)?""==t||null==t||"undefined"==t?(ShowMsg("请输入您的密码！"),!1):regPwd.exec(t)?t.length<6||t.length>20?(ShowMsg("密码由6-20个字母或数字组成！"),!1):void signin(e,t):(ShowMsg("密码由6-20个字母或数字组成！"),!1):(ShowMsg("请输入正确的手机号码！"),!1)}function signin(e,t){Loading();var s=(GetUrlParameter("returl"),setTimeout(function(){linkurlerror()},3e4));if(_xmlHttpRequest=createXmlHttpRequest(),null!=_xmlHttpRequest){var n=urlLink+"/web/user/login";_xmlHttpRequest.open("POST",n,!0),_xmlHttpRequest.withCredentials=!0,_xmlHttpRequest.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),_xmlHttpRequest.onreadystatechange=function(){if(4==_xmlHttpRequest.readyState&&200==_xmlHttpRequest.status){s&&(clearTimeout(s),s=null),severResponse=_xmlHttpRequest.responseText;var e=JSON.parse(severResponse);switch(e.code){case 0:var t=e.data;void 0===t.struct_idinfo&&(t.struct_idinfo=""),localSave(t.string_phone_number,localStorage.code,t.tk_session,t.int64_uin,t.int64_status,t.int64_verify_status,t.int64_increase_check_status,t.int32_limit_amount,t.int32_is_set_pay_password,t.int32_market_score,t.int32_apply_status,t.int64_real_id_verify_status,t.int32_is_register,t.int32_stu_worker,t.int32_married,t.string_qq,t.string_invite_code,t.string_username,t.int32_remainday,t.struct_idinfo.string_id),1==localStorage.int32_is_register?window.location.href="accountactivate.html":ajaxFn(urlLink+"/web/user/baofoo_query_bind",{query_mode:0},isBind,null,"post");break;case-10004:case-10003:session_expired(e.msg);break;case 404:case-10002:logout();break;default:top_meassage(e.msg),show_topmessage()}LoadingOver()}},_xmlHttpRequest.send("username="+e+"&password="+t+"&code="+localStorage.code+"&openid="+localStorage.openid)}}function isBind(e){switch(e.code){case 0:1==e.data.int32_bind_status?window.location.href="index_bk.html":window.location.href="bindBankCard.html";break;default:ShowMsg(e.msg)}}function registerclick(){var e=GetUrlParameter("code");""!=e&&"undefined"!=e&&null!=e&&(localStorage.code=e);var t=$("#txt_phoneno").val(),s=$("#txt_vcode").val(),n=$("#txt_phonepwd").val(),o=$("#txt_invcode").val();return""==t||null==t||"undefined"==t?(ShowMsg("请输入您的手机号码！"),!1):regPhone.exec(t)?""==s||null==s||"undefined"==s?(ShowMsg("请输入短信中的验证码！"),!1):""==n||null==n||"undefined"==n?(ShowMsg("请输入您的密码！"),!1):regPwd.exec(n)?n.length<6||n.length>20?(ShowMsg("密码由6-20个字母或数字组成！"),!1):void signup(t,n,s,o):(ShowMsg("密码由6-20个字母或数字组成！"),!1):(ShowMsg("请输入正确的手机号码！"),!1)}function signup(e,t,s,n){Loading();var o=setTimeout(function(){LoadingOver(),top_meassage("请求超时，请稍后再试"),show_topmessage()},3e4);if(_xmlHttpRequest=createXmlHttpRequest(),null!=_xmlHttpRequest){var a=urlLink+"/web/user/register";_xmlHttpRequest.open("POST",a,!0),_xmlHttpRequest.withCredentials=!0,_xmlHttpRequest.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),_xmlHttpRequest.onreadystatechange=function(){if(4==_xmlHttpRequest.readyState&&200==_xmlHttpRequest.status){o&&(clearTimeout(o),o=null),severResponse=_xmlHttpRequest.responseText;var e=JSON.parse(severResponse);switch(e.code){case 0:var t=e.data;void 0===t.struct_idinfo&&(t.struct_idinfo=""),localSave(t.string_phone_number,localStorage.code,t.tk_session,t.int64_uin,t.int64_status,t.int64_verify_status,t.int64_increase_check_status,t.int32_limit_amount,t.int32_is_set_pay_password,t.int32_market_score,t.int32_apply_status,t.int64_real_id_verify_status,t.int32_is_register,t.int32_stu_worker,t.int32_married,t.string_qq,t.string_invite_code,t.string_username,t.int32_remainday,t.struct_idinfo.string_id),History.pushState(null,null,"home.html"),register();break;case-10004:case-10003:session_expired(e.msg);break;case 404:case-10002:logout();break;default:top_meassage(e.msg),show_topmessage()}LoadingOver()}},_xmlHttpRequest.send("username="+e+"&password="+t+"&verify_code="+s+"&invite_code="+n+"&code="+localStorage.code+"&openid="+localStorage.openid)}}function forgetpwdclick(){var e=$("#txt_phoneno").val(),t=$("#txt_vcode").val(),s=$("#txt_phonepwd").val();return""==e||null==e||"undefined"==e?(ShowMsg("请输入您的手机号码！"),!1):regPhone.exec(e)?""==t||null==t||"undefined"==t?(ShowMsg("请输入短信中的验证码！"),!1):""==s||null==s||"undefined"==s?(ShowMsg("请输入您的密码！"),!1):regPwd.exec(s)?s.length<6||s.length>20?(ShowMsg("密码由6-20个字母或数字组成！"),!1):void forget_password(e,s,t):(ShowMsg("密码由6-20个字母或数字组成！"),!1):(ShowMsg("请输入正确的手机号码！"),!1)}function forget_password(e,t,s){Loading();var n=setTimeout(function(){LoadingOver(),top_meassage("请求超时，请稍后再试"),show_topmessage()},3e4);if(_xmlHttpRequest=createXmlHttpRequest(),null!=_xmlHttpRequest){var o=urlLink+"/web/user/forget_password";_xmlHttpRequest.open("POST",o,!0),_xmlHttpRequest.withCredentials=!0,_xmlHttpRequest.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),_xmlHttpRequest.onreadystatechange=function(){if(4==_xmlHttpRequest.readyState&&200==_xmlHttpRequest.status){n&&(clearTimeout(n),n=null),severResponse=_xmlHttpRequest.responseText;var e=JSON.parse(severResponse);switch(e.code){case 0:History.pushState(null,null,"home.html"),divshow("filesubmit");break;case-10004:case-10003:session_expired(e.msg);break;case 404:case-10002:logout();break;default:top_meassage(e.msg),show_topmessage()}LoadingOver()}},_xmlHttpRequest.send("username="+e+"&new_pwd="+t+"&verify_code="+s)}}function ZDLogin(){signin($("#txt_phoneno").val(),$("#txt_phonepwd").val())}function activateclick(){var e=$("#txt_phoneno").val(),t=$("#txt_vcode").val(),s=$("#txt_phonepwd").val(),n=$("#txt_invcode").val();return""==t||null==t||"undefined"==t?(ShowMsg("请输入短信中的验证码！"),!1):""==s||null==s||"undefined"==s?(ShowMsg("请输入您的密码！"),!1):regPwd.exec(s)?s.length<6||s.length>20?(ShowMsg("密码由6-20个字母或数字组成！"),!1):void actived(e,s,t,n):(ShowMsg("密码由6-20个字母或数字组成！"),!1)}function actived(e,t,s,n){Loading();var o=setTimeout(function(){LoadingOver(),top_meassage("请求超时，请稍后再试"),show_topmessage()},3e4);if(_xmlHttpRequest=createXmlHttpRequest(),null!=_xmlHttpRequest){var a=urlLink+"/web/user/account/active";_xmlHttpRequest.open("POST",a,!0),_xmlHttpRequest.withCredentials=!0,_xmlHttpRequest.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),_xmlHttpRequest.onreadystatechange=function(){if(4==_xmlHttpRequest.readyState&&200==_xmlHttpRequest.status){o&&(clearTimeout(o),o=null),severResponse=_xmlHttpRequest.responseText;var e=JSON.parse(severResponse);switch(e.code){case 0:localStorage.int32_is_register=0,History.pushState(null,null,"home.html"),divshow("accountactivate");break;case-10004:case-10003:session_expired(e.msg);break;case 404:case-10002:logout();break;default:top_meassage(e.msg),show_topmessage()}LoadingOver()}},_xmlHttpRequest.send("username="+e+"&password="+t+"&verify_code="+s+"&invite_code="+n)}}